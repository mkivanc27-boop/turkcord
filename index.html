<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TurkCord</title>

<style>
body{
margin:0;
font-family:sans-serif;
background:#1e1f22;
color:white;
}

.screen{
height:100vh;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
gap:10px;
}

input{
padding:10px;
width:250px;
border-radius:6px;
border:none;
background:#2b2d31;
color:white;
}

button{
padding:10px 15px;
border:none;
border-radius:6px;
background:#5865f2;
color:white;
cursor:pointer;
}

.link{
color:#5865f2;
cursor:pointer;
font-size:14px;
}
</style>

</head>
<body>

<div id="loginScreen" class="screen">

<h2>Login</h2>

<input id="loginEmail" placeholder="Email">
<input id="loginPassword" type="password" placeholder="Åifre">

<button onclick="login()">GiriÅŸ</button>

<div>
HesabÄ±n yok mu?
<span class="link" onclick="showRegister()">KayÄ±t Ol</span>
</div>

</div>


<div id="registerScreen" class="screen" style="display:none;">

<h2>KayÄ±t Ol</h2>

<input id="registerUsername" placeholder="KullanÄ±cÄ± AdÄ±">
<input id="registerEmail" placeholder="Email">
<input id="registerPassword" type="password" placeholder="Åifre">

<button onclick="register()">KayÄ±t Ol</button>

<div>
Zaten hesabÄ±n var mÄ±?
<span class="link" onclick="showLogin()">GiriÅŸ Yap</span>
</div>

</div>


<script type="module">

/* ğŸ”¥ FIREBASE */

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
getAuth,
createUserWithEmailAndPassword,
signInWithEmailAndPassword
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

import {
getFirestore,
doc,
setDoc
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";


/* ğŸ”´ SENÄ°N CONFIG */

const firebaseConfig = {
apiKey: "AIzaSyC98wxJQk8yNZFdE-OJ1Tlpy1ANuaRUT14",
authDomain: "turkcord-47b24.firebaseapp.com",
projectId: "turkcord-47b24",
storageBucket: "turkcord-47b24.firebasestorage.app",
messagingSenderId: "474688300925",
appId: "1:474688300925:web:75d8d4c690b92c7d438e14"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);


/* ================= SCREEN SWITCH ================= */

window.showRegister = ()=>{
loginScreen.style.display="none";
registerScreen.style.display="flex";
};

window.showLogin = ()=>{
loginScreen.style.display="flex";
registerScreen.style.display="none";
};


/* ================= REGISTER ================= */

window.register = async()=>{

try{

const userCredential = await createUserWithEmailAndPassword(
auth,
registerEmail.value,
registerPassword.value
);

await setDoc(doc(db,"users",userCredential.user.uid),{
username:registerUsername.value,
email:registerEmail.value
});

alert("KayÄ±t BaÅŸarÄ±lÄ±");

}catch(err){
alert("Register Hata:\n"+err.message);
}

};


/* ================= LOGIN ================= */

window.login = async()=>{

try{

await signInWithEmailAndPassword(
auth,
loginEmail.value,
loginPassword.value
);

alert("Login BaÅŸarÄ±lÄ±");

}catch(err){
alert("Login Hata:\n"+err.message);
}

};

</script>

</body>
</html>
