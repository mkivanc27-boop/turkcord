<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TurkCord</title>

<style>
body{
margin:0;
font-family:sans-serif;
background:#1e1f22;
color:white;
}

#auth{
height:100vh;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
gap:10px;
}

input{
padding:10px;
width:250px;
border-radius:6px;
border:none;
background:#2b2d31;
color:white;
}

button{
padding:10px 15px;
border:none;
border-radius:6px;
background:#5865f2;
color:white;
cursor:pointer;
}

#app{
display:none;
padding:20px;
}
</style>

</head>
<body>

<div id="auth">
<h2>Login / Register</h2>

<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Åžifre">

<button onclick="register()">Register</button>
<button onclick="login()">Login</button>

</div>

<div id="app">
<h2>GiriÅŸ BaÅŸarÄ±lÄ± ðŸŽ‰</h2>
<button onclick="logout()">Logout</button>

<hr>

<h3>Server OluÅŸtur</h3>
<input id="serverName" placeholder="Server adÄ±">
<button onclick="createServer()">OluÅŸtur</button>

<div id="serverList"></div>

</div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getAuth,
createUserWithEmailAndPassword,
signInWithEmailAndPassword,
signOut,
onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

import {
getFirestore,
collection,
addDoc,
onSnapshot
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

/* ðŸ”¥ SENÄ°N GERÃ‡EK CONFIGÄ°N */

const firebaseConfig = {

apiKey: "IzaSyC98wxJQk8yNZFdE-OJ1Tlpy1ANuaRUT14",

authDomain: "turkcord-47b24.firebaseapp.com",

projectId: "turkcord-47b24",

storageBucket: "turkcord-47b24.firebasestorage.app",

messagingSenderId: "474688300925",

appId: "1:474688300925:web:75d8d4c690b92c7d438e14"

};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* ================= AUTH ================= */

window.register = async()=>{
await createUserWithEmailAndPassword(auth,email.value,password.value);
};

window.login = async()=>{
await signInWithEmailAndPassword(auth,email.value,password.value);
};

window.logout = async()=>{
await signOut(auth);
};

/* ================= UI ================= */

onAuthStateChanged(auth,(user)=>{
if(user){
authDiv.style.display="none";
appDiv.style.display="block";
loadServers();
}else{
authDiv.style.display="flex";
appDiv.style.display="none";
}
});

/* ================= SERVER ================= */

window.createServer = async()=>{
if(!serverName.value) return;

await addDoc(collection(db,"servers"),{
name:serverName.value,
owner:auth.currentUser.uid
});

serverName.value="";
};

/* ================= LOAD SERVERS ================= */

function loadServers(){

onSnapshot(collection(db,"servers"),snap=>{
serverList.innerHTML="";

snap.forEach(doc=>{
const data = doc.data();

const div=document.createElement("div");
div.style.background="#2b2d31";
div.style.padding="6px";
div.style.marginTop="6px";
div.style.borderRadius="6px";
div.innerText=data.name;

serverList.appendChild(div);
});
});

}

</script>

</body>
</html>
